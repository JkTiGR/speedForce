html { scroll-behavior: smooth; }
:root{
  --bg:#0b0f1a; --text:#fff; --muted:#9fb3c8;
  --glass:rgba(255,255,255,.06); --glass-strong:rgba(16,22,36,.72);
  --line:rgba(255,255,255,.12);
  --brandA:#4fd3ff; --brandB:#8f00ff;

  /* Dynamic Island */
  --island-top: max(10px, env(safe-area-inset-top));
  --island-w: 420px;

  /* Glass buttons */
  --glass-btn: rgba(255,255,255,.08);
  --glass-btn-2: rgba(255,255,255,.12);
  --ring: rgba(255,255,255,.20);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;color:var(--text);
  font:16px/1.48 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
  background: url('fon.png') center/cover fixed no-repeat, var(--bg);
  -webkit-tap-highlight-color:transparent;
}
body::after{
  content:"";position:fixed;inset:0;pointer-events:none;z-index:-1;
  background:
    radial-gradient(1100px 900px at 10% -10%, #4168ff22, transparent 60%),
    radial-gradient(1100px 900px at 90% 110%, #b34dff22, transparent 55%);
}

.app{
  max-width:430px;margin:0 auto;min-height:100dvh;
  padding:calc(14px + env(safe-area-inset-top)) 14px calc(28px + env(safe-area-inset-bottom));
}

/* Header / top bar */
.header{
  position:sticky; top:0; z-index:30; margin:-6px -4px 8px;
}
.bar{
  display:flex;align-items:center;gap:10px;padding:8px;border-radius:16px;
  background:linear-gradient(to bottom, rgba(10,15,26,.85), rgba(10,15,26,.5));
  border:1px solid var(--line); backdrop-filter:saturate(140%) blur(12px);
}
.brand{
  margin:0;font-size:1.06rem;letter-spacing:.35px;display:flex;align-items:center;gap:6px;font-weight:900;cursor:pointer;
}
.brand .mark{
  height:18px;filter:drop-shadow(0 0 6px #9b5bff94);
}
.lang{margin-left:auto}
.lang select{
  appearance:none;border-radius:10px;padding:10px 28px 10px 12px;min-height:44px;
  color:var(--text);background:var(--glass-strong);border:1px solid var(--line);outline:none;
}
.burger{
  width:44px;height:44px;border-radius:12px;border:1px solid var(--line);
  background:var(--glass-strong);color:#fff;display:grid;place-items:center;cursor:pointer;
}
.nav-pop{
  position:absolute;right:14px;top:64px;background:rgba(10,14,24,.94);backdrop-filter:blur(14px) saturate(140%);
  border:1px solid var(--line);border-radius:14px;padding:8px;display:none;min-width:220px;z-index:40;
}
.nav-pop.open{display:block}
.nav-pop a,.nav-pop .lang-inline{
  display:flex;align-items:center;gap:10px;padding:12px;border-radius:10px;color:#fff;text-decoration:none;min-height:44px;
}
.nav-pop a:hover,.nav-pop .lang-inline:hover{background:var(--glass)}
.nav-pop hr{border:0;height:1px;background:var(--line);margin:6px 0}
.nav-pop .lang-inline select{
  flex:1;background:var(--glass-strong);border:1px solid var(--line);color:#fff;border-radius:10px;padding:8px 10px;min-height:44px;
}

/* Category nav */
.cat-nav {
  display: flex; align-items: center; gap: 10px;
  position: sticky; top: 0; z-index: 20; margin: 0 -14px; padding: 0 14px;
  background: transparent;
}
.glass-nav{
  background: rgba(10,14,24,.55);
  border: 1px solid rgba(255,255,255,.12);
  backdrop-filter: blur(14px) saturate(160%);
  -webkit-backdrop-filter: blur(14px) saturate(160%);
  border-radius: 16px;
  padding: 6px 10px;
  margin: 0 -14px 8px;
}
.h-scroll{
  display:flex;gap:8px;overflow:auto;scroll-snap-type:x proximity;padding:6px 0; flex: 1;
}
.pill{
  scroll-snap-align:start;white-space:nowrap;padding:10px 14px;border-radius:999px;border:1px solid var(--line);
  background:var(--glass);backdrop-filter:blur(8px);color:#fff;cursor:pointer;min-height:44px;text-decoration: none;
}
.pill:active{transform:scale(.98)}
.pill.active{
  background:linear-gradient(90deg,var(--brandA),var(--brandB));color:#001027;border:none;font-weight:800;
}

body.island .glass-nav {display:none;}
body.island .h-scroll {display:flex; gap:6px; padding:0; margin:0 4px; flex:1;}
body.island .pill {padding:6px 12px; min-height:32px; font-size:0.94rem; border-radius:24px;}
body.island .burger {display:none;}

/* View toggle (mini) */
.view-toggle-mini{
  width:40px; height:40px; display:inline-grid; place-items:center;
}

/* Cards */
.list{
  display:grid;gap:10px;margin-top:8px;
  grid-template-columns:repeat(2,minmax(0,1fr));
}
.card{
  display:grid;grid-template-rows:auto auto auto;gap:8px;
  padding:10px;border-radius:18px;background:var(--glass);border:1px solid var(--line);backdrop-filter:blur(10px);
  position:relative;overflow:hidden;
}
.thumb-wrap{position:relative}
.thumb{
  width:100%;aspect-ratio:1/1;border-radius:20px;overflow:hidden;
  background:linear-gradient(135deg,#3a517f,#7a45cc);
}
.thumb img{
  position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:block;border-radius:inherit;
}
@supports (clip-path: inset(0 round 20px)){
  .thumb{clip-path: inset(0 round 20px);}
}
.info{
  position:absolute;right:8px;top:8px;width:28px;height:28px;border-radius:999px;border:1px solid var(--line);
  background:var(--glass-strong);color:#fff;cursor:pointer;display:grid;place-items:center;font-weight:800;
}
.name{
  font-weight:800;line-height:1.2;min-height:2.4em;
}
.desc{
  display:none;color:var(--muted);font-size:.92rem;
}
.card.expanded .desc{display:block}
.foot{
  display:flex;align-items:center;justify-content:space-between;gap:8px;
}
.price{font-weight:800}
.add{
  border:none;border-radius:999px;padding:10px 14px;
  background:linear-gradient(90deg,var(--brandA),var(--brandB));
  color:#001027;font-weight:800;cursor:pointer;min-height:40px;flex:1;
}

/* Meta info line under name */
.meta{
  font-size:.86rem;
  color:var(--muted);
  min-height:1.2em;
}
.list.as-list .meta{
  grid-column:2 / 4;
}

/* List view */
.list.as-list{grid-template-columns:1fr}
.list.as-list .card{
  grid-template-columns:92px 1fr auto;
  grid-template-rows:auto auto;
  gap:10px;
}
.list.as-list .thumb{
  width:92px;height:92px;aspect-ratio:auto;border-radius:14px;
}
.list.as-list .thumb-wrap{grid-row:1/3}
.list.as-list .name{grid-column:2}
.list.as-list .foot{
  grid-column:2/4;justify-content:space-between;
}

.qty{
  display:inline-flex;align-items:center;gap:8px;
  border:1px solid var(--line);border-radius:999px;padding:6px 8px;
}
.qty button{
  width:32px;height:32px;border:none;border-radius:10px;
  background:var(--glass-strong);color:#fff;cursor:pointer;
}

/* FAB cart */
.fab{
  position:sticky;bottom:calc(14px + env(safe-area-inset-bottom));
  display:flex;justify-content:center;margin-top:14px;z-index:35;
}
.cart-fab{
  display:inline-flex;align-items:center;gap:10px;border:none;border-radius:999px;
  padding:12px 18px;cursor:pointer;color:#001027;
  background:linear-gradient(90deg,var(--brandA),var(--brandB));
  font-weight:800;box-shadow:0 18px 28px #001a2f66;min-height:48px;
}

/* Bottom Sheet (cart & categories) */
.overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.45);
  opacity:0;pointer-events:none;transition:.2s opacity;z-index:40;
}
.overlay.show{
  opacity:1;pointer-events:auto;
}
.sheet{
  position:fixed;left:0;right:0;bottom:0;width:100%;max-width:430px;margin:0 auto;
  background:rgba(10,14,24,.96);backdrop-filter:blur(16px) saturate(140%);
  border-top-left-radius:18px;border-top-right-radius:18px;border:1px solid var(--line);
  padding:14px;padding-bottom:calc(14px + env(safe-area-inset-bottom));
  transition:.25s transform; transform:translateY(100%); z-index:41;
  max-height:85dvh; overflow:auto; overscroll-behavior:contain;
}
.sheet.open{ transform:translateY(0) }
.sheet h3{margin:0 0 8px}

/* handle for swipe */
.sheet-handle{
  width:42px;
  height:5px;
  border-radius:4px;
  background:var(--glass-btn-2);
  margin:0 auto 10px;
  opacity:0.9;
  pointer-events:none;
}

/* close X button */
.sheet-close{
  position:absolute;
  top:10px;
  right:10px;
  width:36px;
  height:36px;
  border:none;
  border-radius:10px;
  background:var(--glass-strong);
  border:1px solid var(--line);
  color:#fff;
  font-size:20px;
  font-weight:700;
  cursor:pointer;
  display:grid;
  place-items:center;
  backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px);
}
.sheet-close:hover{
  background:var(--glass-btn-2);
  border-color:var(--ring);
}
.sheet-close:active{
  transform:scale(.95);
  box-shadow: inset 0 2px 8px #00000060, 0 6px 16px #00000055;
}

.cart-lines{
  display:grid;gap:10px;max-height:38dvh;overflow:auto;padding-right:4px;
}
.line{
  display:grid;grid-template-columns:1fr auto;align-items:center;gap:10px;
  padding:8px;border-radius:12px;border:1px dashed var(--line);
}
.section{margin-top:10px}
.group{
  display:flex;gap:8px;flex-wrap:wrap;
}
.chip{
  padding:10px 14px;border-radius:999px;
  background:var(--glass);border:1px solid var(--line);cursor:pointer;min-height:44px;
}
.chip.active{
  background:linear-gradient(90deg,var(--brandA),var(--brandB));
  color:#001027;border:none;font-weight:800;
}
.field{
  display:grid;gap:6px;margin-top:8px;
}
.field input,.field textarea,.field select{
  border-radius:10px;padding:12px;background:var(--glass-strong);
  color:#fff;border:1px solid var(--line);outline:none;font-size:1rem;min-height:44px;
}
.field textarea{
  min-height:72px;resize:vertical;
}
.checkout{
  display:grid;gap:8px;margin-top:10px;
}
.btn{
  border:none;border-radius:14px;padding:12px 14px;font-weight:800;cursor:pointer;min-height:48px;
}
.btn.primary{
  background:linear-gradient(90deg,var(--brandA),var(--brandB));color:#001027;
}
.btn.ghost{
  background:transparent;border:1px dashed var(--line);color:#fff;
}
.muted{color:var(--muted)}

/* Glass buttons (global hover/active) */
.btn,.add,.cart-fab,.app-badge,.chip,.pill,.qty button,.burger,
.dock-btn,.seg-btn,.hero-close,.seg-close{
  background: var(--glass-btn); color: var(--text); border: 1px solid var(--line);
  border-radius: 14px; box-shadow: inset 0 1px 0 #ffffff10,
    inset 0 -1px 0 #00000030, 0 10px 24px #00000040;
  backdrop-filter: blur(12px) saturate(140%);
  -webkit-backdrop-filter: blur(12px) saturate(140%);
  text-decoration: none;
}
.btn,.add{
  min-height: 44px; padding: 12px 16px; font-weight: 800; border-radius: 999px;
}
.cart-fab{
  min-height:48px; padding:12px 18px; border-radius:999px;
}
.chip,.pill{
  min-height:40px; padding:10px 14px; border-radius:999px;
}
.qty button{
  width:32px; height:32px; border-radius:10px;
}
.burger{
  width:44px; height:44px; border-radius:12px;
}
.btn:hover,.add:hover,.cart-fab:hover,.app-badge:hover,
.chip:hover,.pill:hover,.qty button:hover,.burger:hover,
.dock-btn:hover,.seg-btn:hover,.hero-close:hover,.seg-close:hover{
  background: var(--glass-btn-2); border-color: var(--ring);
  box-shadow: inset 0 1px 0 #ffffff18,
    inset 0 -1px 0 #00000040, 0 12px 28px #00000055,
    0 0 0 1px var(--ring);
}
.btn:active,.add:active,.cart-fab:active,.app-badge:active,
.chip:active,.pill:active,.qty button:active,.burger:active,
.dock-btn:active,.seg-btn:active,.hero-close:active,.seg-close:active{
  transform: translateY(1px) scale(.99);
  box-shadow: inset 0 2px 8px #00000060, 0 6px 16px #00000055;
}

/* === Dynamic Island (active header state) === */
body.island .header .bar{
  position: fixed; left: 50%; top: var(--island-top);
  transform: translateX(-50%) scale(0.98); transform-origin: center top;
  width: min(var(--island-w), calc(100% - 8px));
  padding: 8px 10px; gap: 8px; border-radius: 999px; z-index: 60;
  background: rgba(10,14,24,.75); border: 1px solid rgba(255,255,255,.14);
  box-shadow: 0 18px 28px #001a2f66,
    inset 0 1px 0 #ffffff12, inset 0 -1px 0 #0000003a;
  backdrop-filter: blur(16px) saturate(160%);
  -webkit-backdrop-filter: blur(16px) saturate(160%);
  animation: islandIn .28s ease;
}
body.island .brand{
  font-size:0; letter-spacing:0;
}
body.island .brand .mark{
  height:18px; margin:0 2px; filter:drop-shadow(0 0 6px #9b5bff94);
}
body.island .lang{ display:none; }
body.island .app{
  padding-top: calc(14px + 54px + env(safe-area-inset-top));
}
@keyframes islandIn{
  from{
    transform:translateX(-50%) translateY(-6px) scale(0.96);
    opacity:.0;
  }
  to{
    transform:translateX(-50%) translateY(0) scale(0.98);
    opacity:1;
  }
}

/* Hero (promo) */
.hero {
  text-align:center; margin:10px 0 20px;
  transition: opacity 0.28s ease, transform 0.28s ease;
}
body.island .hero {
  opacity:0; transform:translateY(-30px); pointer-events:none;
}
.promo {
  width:100%; border-radius:14px; margin-bottom:16px;
}
.menu-title {
  font-size:2.5em; font-weight:900; margin-bottom:12px;
}
.social {
  display:flex; justify-content:center; gap:12px; margin-bottom:16px;
}
.social-link {
  display:block; width:48px; height:48px;
  border-radius:12px; background:var(--glass-strong);
  border:1px solid var(--line); overflow:hidden;
}
.social-link img {
  width:100%; height:100%; object-fit:contain; padding:8px;
}

/* ===== Bottom Dock ===== */
.dock{
  position:sticky; bottom:calc(10px + env(safe-area-inset-bottom));
  display:flex; justify-content:space-between; align-items:center; gap:10px;
  margin-top:8px; z-index:36; padding:8px 10px; border-radius:18px;
  background: rgba(10,14,24,.6); border:1px solid rgba(255,255,255,.12);
  backdrop-filter: blur(14px) saturate(160%);
}
.dock-btn{
  display:grid;place-items:center;
  width:48px;height:48px;border-radius:14px; color:#fff;
  cursor:pointer; font-weight:800;
}
.dock-cart{
  min-width:120px; padding:0 12px; font-weight:800;
}

/* Dock overrides + lang selector */
.dock{ flex-wrap: wrap; }
.dock-btn{ min-width:48px; padding:0 12px; }
.dock-lang select{
  appearance:none; height:48px; min-width:84px; padding:0 10px;
  border-radius:12px; color:#fff; background:var(--glass-strong);
  border:1px solid var(--line);
}

/* Стеклянная кнопка MENU в герое */
.hero-menu{
  display:inline-flex; align-items:center; justify-content:center;
  width:auto; height:auto; min-width:unset;
  padding:10px 16px; font-weight:800; font-size:1.05rem; letter-spacing:.3px;
  border-radius:14px;
}
